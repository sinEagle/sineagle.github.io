<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/eagle32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/eagle16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=DejaVu Sans Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-flat-top.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"sineagle.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="HIT-计算机网络(自顶向下方法)-传输层">
<meta property="og:url" content="https://sineagle.github.io/2022/03/21/HIT-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95-%E4%BC%A0%E8%BE%93%E5%B1%82/index.html">
<meta property="og:site_name" content="sinEagle">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321191435.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321192005.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321193137.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321193746.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321194032.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220322145858.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220322150614.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220322151558.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220414195619.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220414200858.png">
<meta property="og:image" content="c:/Users/bottlecodes/AppData/Roaming/Typora/typora-user-images/image-20220414200939088.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220414201106.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415151621.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415151637.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415152820.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415153409.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415153613.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415155711.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415160622.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415160730.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415160949.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423095540.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423095958.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423100020.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423101618.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423102709.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220430195734.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220430204935.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220430205308.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220501201953.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220501202809.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220501205938.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502200710.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502201913.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502202002.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502203943.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502203956.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502204621.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502205019.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502205507.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502205522.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220527195616.png">
<meta property="article:published_time" content="2022-03-21T10:38:31.000Z">
<meta property="article:modified_time" content="2022-07-06T08:55:40.898Z">
<meta property="article:author" content="sineagle">
<meta property="article:tag" content="计网">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321191435.png">

<link rel="canonical" href="https://sineagle.github.io/2022/03/21/HIT-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95-%E4%BC%A0%E8%BE%93%E5%B1%82/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>HIT-计算机网络(自顶向下方法)-传输层 | sinEagle</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">sinEagle</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">bottlecode</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
			
			

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://sineagle.github.io/2022/03/21/HIT-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95-%E4%BC%A0%E8%BE%93%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/touxiang.jpg">
      <meta itemprop="name" content="sineagle">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sinEagle">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          HIT-计算机网络(自顶向下方法)-传输层
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-21 18:38:31" itemprop="dateCreated datePublished" datetime="2022-03-21T18:38:31+08:00">2022-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-06 16:55:40" itemprop="dateModified" datetime="2022-07-06T16:55:40+08:00">2022-07-06</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>
            <div class="post-description"> </div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="传输层服务"><a href="#传输层服务" class="headerlink" title="传输层服务"></a>传输层服务</h2><h3 id="传输层开篇"><a href="#传输层开篇" class="headerlink" title="传输层开篇"></a>传输层开篇</h3><ul>
<li>理解传输层服务的基本理论与基本机制<ul>
<li>复用/分用</li>
<li>可靠数据传输机制</li>
<li>流量控制机制</li>
<li>拥塞控制机制</li>
</ul>
</li>
<li>掌握Internet传输层协议<ul>
<li>UDP : 无连接传输服务</li>
<li>TCP ：面向连接传输服务</li>
<li>TCP拥塞控制</li>
</ul>
</li>
</ul>
<h3 id="传输层服务概述"><a href="#传输层服务概述" class="headerlink" title="传输层服务概述"></a>传输层服务概述</h3><h4 id="传输层服务和协议"><a href="#传输层服务和协议" class="headerlink" title="传输层服务和协议"></a>传输层服务和协议</h4><ul>
<li>传输层协议为运行在不同Host上的进程提供了一种<strong>逻辑通信机制</strong></li>
<li>端系统运行传输层协议<ul>
<li>发送方： 将应用递交的消息分成一个或多个Segment， 并向下传给网络层</li>
<li>接收方： 将接受到的segment组装成消息，并向上交给应用层</li>
</ul>
</li>
<li>传输层可以为应用提供多种协议<ul>
<li>Internet 上的 TCP</li>
<li>Internet 上的 UDP</li>
</ul>
</li>
</ul>
<h4 id="传输层-vs-网络层"><a href="#传输层-vs-网络层" class="headerlink" title="传输层 vs. 网络层"></a>传输层 vs. 网络层</h4><ul>
<li>网络层： 提供<strong>主机</strong>之间的逻辑通信机制</li>
<li>传输层： 提供<strong>应用进程</strong>之间的逻辑通信机制<ul>
<li>位于网络层之上</li>
<li>依赖于网络层服务</li>
<li>对网络层服务进行（可能的）增强</li>
</ul>
</li>
</ul>
<h4 id="Internet传输层协议"><a href="#Internet传输层协议" class="headerlink" title="Internet传输层协议"></a>Internet传输层协议</h4><ul>
<li>可靠、按序的交付服务（TCP）<ul>
<li>拥塞控制</li>
<li>流量控制</li>
<li>连接建立</li>
</ul>
</li>
<li>不可靠的交付服务（UDP）<ul>
<li>基于 “尽力而为” 的网络层，没有做（可靠性方面的）扩展</li>
</ul>
</li>
<li>两种服务均不保证<ul>
<li>延迟</li>
<li>带宽</li>
</ul>
</li>
</ul>
<h2 id="多路复用和多路分用"><a href="#多路复用和多路分用" class="headerlink" title="多路复用和多路分用"></a>多路复用和多路分用</h2><h3 id="多路复用-分用"><a href="#多路复用-分用" class="headerlink" title="多路复用/分用"></a>多路复用/分用</h3><p>如果某层一个协议对应直接上层的多个协议/实体，则需要复用/分用</p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321191435.png"></p>
<h3 id="分用如何工作"><a href="#分用如何工作" class="headerlink" title="分用如何工作"></a>分用如何工作</h3><ul>
<li>主机接受到 IP 数据包（datagram）<ul>
<li>每个数据包携带源IP地址、目的IP地址</li>
<li>每个数据包携带一个传输层的段（segment）</li>
<li>每个段携带源端口号和目的端口号</li>
</ul>
</li>
<li>主机收到segment后， 传输层协议提取IP地址和端口号信息，将segment导向相应的Socket<ul>
<li>TCP做更多处理</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321192005.png"></p>
<h3 id="无连接分用"><a href="#无连接分用" class="headerlink" title="无连接分用"></a>无连接分用</h3><ul>
<li>利用端口号创建 Socket</li>
<li>UDP的Socket用二元组标识<ul>
<li>（目的IP地址， 目的端口号）</li>
</ul>
</li>
<li>主机收到UDP段之后<ul>
<li>检查段中的目的端口号</li>
<li>将UDP段导向绑定在该端口号的Socket</li>
</ul>
</li>
<li>来自不同源IP地址和/或源端口号的IP数据包被导向同一个Socket</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321193137.png"></p>
<h3 id="面向连接的分用"><a href="#面向连接的分用" class="headerlink" title="面向连接的分用"></a>面向连接的分用</h3><ul>
<li><p>TCP的Socket 用四元组标识</p>
<ul>
<li>源IP地址</li>
<li>源端口号</li>
<li>目的IP地址</li>
<li>目的端口号</li>
</ul>
</li>
<li><p>接受端利用所有的四个值将Segment导向合适的Socket</p>
</li>
<li><p>服务器可能同时支持多个TCP Socket</p>
<ul>
<li>每个Socket用自己的四元组标识</li>
</ul>
</li>
<li><p>Web服务器为每个客户端开不同的Socket</p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321193746.png"></p>
</li>
</ul>
<h4 id="多线程Web服务器"><a href="#多线程Web服务器" class="headerlink" title="多线程Web服务器"></a>多线程Web服务器</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220321194032.png"></p>
<h2 id="无连接传输协议-UDP"><a href="#无连接传输协议-UDP" class="headerlink" title="无连接传输协议-UDP"></a>无连接传输协议-UDP</h2><h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><ul>
<li><p>基于 Internet IP协议</p>
<ul>
<li>复用/分用</li>
<li>简单的错误校验</li>
</ul>
</li>
<li><p>“Best effort 服务” , UDP端可能</p>
<ul>
<li>丢失</li>
<li>非按序到达</li>
</ul>
</li>
<li><p>无连接</p>
<ul>
<li>UDP发送方和接收方不需要握手</li>
<li>每个UDP段的处理独立于其他段</li>
</ul>
</li>
</ul>
<p>UDP为什么存在？</p>
<ol>
<li>无需建立连接（减少延迟）</li>
<li>实现简单，无需维护连接状态</li>
<li>头部开销少</li>
<li>没有拥塞控制；应用可更好地控制发送时间和速率</li>
</ol>
<ul>
<li>常用用于流媒体应用<ul>
<li>容忍丢失</li>
<li>速率敏感</li>
</ul>
</li>
<li>UDP还用于<ul>
<li>DNS</li>
<li>SNMP</li>
</ul>
</li>
<li>在UDP上实现可靠数据传输<ul>
<li>在应用层增加可靠机制</li>
<li>应用特定的错误恢复机制</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220322145858.png"></p>
<h3 id="UDP检验和（checksum）"><a href="#UDP检验和（checksum）" class="headerlink" title="UDP检验和（checksum）"></a>UDP检验和（checksum）</h3><p>目的： 检测<code>UDP</code>在传输中是否发生错误（如位翻转）</p>
<ul>
<li>发送方：<ul>
<li>将段的内容视为16-bit整数</li>
<li>校验和计算：计算所有的整数的和，按位加在和的后面，得到的和按位取反，得到检验和</li>
<li>发送方将检验和放入校验和字段</li>
</ul>
</li>
<li>接收方：<ul>
<li>计算所收到段的校验和</li>
<li>将其与校验和字段进行对比<ul>
<li>不相等：检验出错误</li>
<li>相等：没有检验出错误（但可能有错误）</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220322150614.png"></p>
<h2 id="可靠数据传输原理"><a href="#可靠数据传输原理" class="headerlink" title="可靠数据传输原理"></a>可靠数据传输原理</h2><h3 id="可靠数据传输协议基本结构：接口"><a href="#可靠数据传输协议基本结构：接口" class="headerlink" title="可靠数据传输协议基本结构：接口"></a>可靠数据传输协议基本结构：接口</h3><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220322151558.png"></p>
<h3 id="Rdt1-0-可靠信道上的可靠传输"><a href="#Rdt1-0-可靠信道上的可靠传输" class="headerlink" title="Rdt1.0: 可靠信道上的可靠传输"></a>Rdt1.0: 可靠信道上的可靠传输</h3><p>底层信道完全可靠</p>
<ul>
<li>不会丢弃分组</li>
<li>不会发生错误</li>
</ul>
<p>发送方和接收方 FSM 独立</p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220414195619.png"></p>
<h3 id="Rdt2-0"><a href="#Rdt2-0" class="headerlink" title="Rdt2.0"></a>Rdt2.0</h3><h4 id="Rdt2-0-产生位错误的信道"><a href="#Rdt2-0-产生位错误的信道" class="headerlink" title="Rdt2.0 产生位错误的信道"></a>Rdt2.0 产生位错误的信道</h4><p>底层信道可能翻转分组中的位（bit）</p>
<ul>
<li>利用<font color='red'>校验和</font>检测位错误</li>
</ul>
<p>如何从错误中恢复？</p>
<blockquote>
<p><font color='9900CC'>确认机制（Acknowledgements , ACK</font>）: 接收方显示地告诉发送方分组已正确接受</p>
<p><font color='9900CC'>NAK</font>: 接收方显式地告诉发送方分组有错误</p>
<p>发送方收到 <code>NAK</code> 后，重传分组 </p>
</blockquote>
<p>基于这种重传机制的 <code>rdt</code> 协议称为 <font color='red'>ARQ</font>(Automatic Repeat reQuest) 协议</p>
<p>Rdt 2.0中引入的新机制</p>
<ul>
<li>差错控制</li>
<li>接收方反馈控制消息： ACK / NAK</li>
<li>重传</li>
</ul>
<h4 id="Rdt2-0-FSM规约"><a href="#Rdt2-0-FSM规约" class="headerlink" title="Rdt2.0 : FSM规约"></a>Rdt2.0 : FSM规约</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220414200858.png"></p>
<h4 id="Rdt2-0-无错误场景"><a href="#Rdt2-0-无错误场景" class="headerlink" title="Rdt2.0: 无错误场景"></a>Rdt2.0: 无错误场景</h4><p><img src="C:\Users\bottlecodes\AppData\Roaming\Typora\typora-user-images\image-20220414200939088.png" alt="image-20220414200939088"></p>
<h4 id="Rdt2-0-有错误场景"><a href="#Rdt2-0-有错误场景" class="headerlink" title="Rdt2.0 : 有错误场景"></a>Rdt2.0 : 有错误场景</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220414201106.png"></p>
<h3 id="Rdt2-1-和-Rdt2-2"><a href="#Rdt2-1-和-Rdt2-2" class="headerlink" title="Rdt2.1 和 Rdt2.2"></a>Rdt2.1 和 Rdt2.2</h3><h4 id="Rdt2-0有什么缺陷"><a href="#Rdt2-0有什么缺陷" class="headerlink" title="Rdt2.0有什么缺陷"></a>Rdt2.0有什么缺陷</h4><ul>
<li><p>如果 ACK/NAK消息发生错误/被破坏（conrrupted） 会怎样？</p>
<blockquote>
<p>为 ACK/NAK增加校验和，检错并纠错    </p>
<p>发送方接受到被破坏的ACK/NAK时不知道接收方发生了什么，增加额外的控制消息</p>
<p>如果ACK/NAK坏掉，发送方重传</p>
<p>不能简单的重传：产生<font color='red'>重复分组</font></p>
</blockquote>
</li>
<li><p>如何解决重复分组的问题？</p>
<blockquote>
<p>序列号（Sequence number）: 发送方给每个分组增加序列号</p>
<p>接收方丢弃重复分组</p>
</blockquote>
</li>
</ul>
<h4 id="Rdt2-2-无NAK消息协议"><a href="#Rdt2-2-无NAK消息协议" class="headerlink" title="Rdt2.2: 无NAK消息协议"></a>Rdt2.2: 无NAK消息协议</h4><ul>
<li>与rdt 2.1功能相同，但是只使用ACK</li>
<li>如何实现？<ul>
<li>接收方通过ACK告知最后一个被正确接受的分组</li>
<li>在ACK消息中<font color='red'>显式地加入被确认分组的序列号</font></li>
</ul>
</li>
<li>发送方收到重复的ACK后，采取与收到NAK消息相同的动作<ul>
<li>重传当前分组</li>
</ul>
</li>
</ul>
<h3 id="Rdt3-0"><a href="#Rdt3-0" class="headerlink" title="Rdt3.0"></a>Rdt3.0</h3><p>如果信道既可能发生错误，也可能丢失分组，怎么办？</p>
<ul>
<li>校验和 + 序列号 + ACK + 重传 够用吗</li>
</ul>
<p>方法：发送方等待 “<font color='9900CC'>合理</font>” 时间</p>
<ul>
<li>如果没收到<code>ACK</code> ， 重传</li>
<li>如果分组或<code>ACK</code>只是延迟而不是丢了<ul>
<li>重传会产生重复，序列号机制能够处理</li>
<li>接收方需在ACK中显式告知所确认的分组</li>
</ul>
</li>
<li>需要<font color='red'>定时器</font></li>
</ul>
<h4 id="Rdt3-0示例"><a href="#Rdt3-0示例" class="headerlink" title="Rdt3.0示例"></a>Rdt3.0示例</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415151621.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415151637.png"></p>
<h2 id="流水线机制与滑动窗口协议"><a href="#流水线机制与滑动窗口协议" class="headerlink" title="流水线机制与滑动窗口协议"></a>流水线机制与滑动窗口协议</h2><h3 id="滑动窗口协议"><a href="#滑动窗口协议" class="headerlink" title="滑动窗口协议"></a>滑动窗口协议</h3><h4 id="流水线机制：提高资源利用率"><a href="#流水线机制：提高资源利用率" class="headerlink" title="流水线机制：提高资源利用率"></a>流水线机制：提高资源利用率</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415152820.png"></p>
<h4 id="流水线协议"><a href="#流水线协议" class="headerlink" title="流水线协议"></a>流水线协议</h4><p>允许发送方在收到ACK之前连续发送多个分组</p>
<ul>
<li>更大的<font color='red'>序列号范围</font></li>
<li>发送方和/或接收方需要更大的存储空间以<font color='red'>缓存分组</font></li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415153409.png"></p>
<h4 id="滑动窗口协议-1"><a href="#滑动窗口协议-1" class="headerlink" title="滑动窗口协议"></a>滑动窗口协议</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415153613.png"></p>
<p>滑动窗口协议：Sliding-window protocol</p>
<p>窗口</p>
<ul>
<li>允许使用的序列号范围</li>
<li>窗口尺寸为N : 最多有N个等待的确认的消息</li>
</ul>
<p>滑动窗口</p>
<ul>
<li>随着协议的运行，窗口在序列号空间内向前滑动</li>
</ul>
<p>滑动窗口协议： GBN, SR</p>
<h3 id="GBN协议（Go-Back-N-协议）"><a href="#GBN协议（Go-Back-N-协议）" class="headerlink" title="GBN协议（Go-Back-N 协议）"></a>GBN协议（Go-Back-N 协议）</h3><h4 id="Go-Back-N-GBN-协议发送方"><a href="#Go-Back-N-GBN-协议发送方" class="headerlink" title="Go-Back-N(GBN)协议发送方"></a>Go-Back-N(GBN)协议发送方</h4><p>分组头部包含k-bit序列号</p>
<p>窗口尺寸为N, 最多允许N个分组未确定</p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415155711.png"></p>
<p>ACK(n) : 确认收到序列号n(包含n)的分组均已被正确接受</p>
<ul>
<li>可能收到重复ACK</li>
</ul>
<p>为空中的分组设置<font color='red'>计时器</font>(timer)</p>
<p>超时Timeout(n)事件：重传序列号大于等于n, 还未收到ACK的所有分组</p>
<h4 id="GBN-发送方扩展FSM"><a href="#GBN-发送方扩展FSM" class="headerlink" title="GBN:发送方扩展FSM"></a>GBN:发送方扩展FSM</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415160622.png"></p>
<h4 id="GBN：接收方扩展FSM"><a href="#GBN：接收方扩展FSM" class="headerlink" title="GBN：接收方扩展FSM"></a>GBN：接收方扩展FSM</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415160730.png"></p>
<p>ACK机制：发送拥有最高序列号、已被正确接受的分组的ACK</p>
<ul>
<li>可能会产生重复ACK</li>
<li>只需要记住唯一的expectedseqnum</li>
</ul>
<p>乱序到达的分组：</p>
<ul>
<li>直接丢弃 -&gt; 接收方没有缓存</li>
<li>重新确认序列号最大的、按序到达的分组</li>
</ul>
<h4 id="GBN示例"><a href="#GBN示例" class="headerlink" title="GBN示例"></a>GBN示例</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220415160949.png"></p>
<h3 id="Selective-Repeat协议"><a href="#Selective-Repeat协议" class="headerlink" title="Selective  Repeat协议"></a>Selective  Repeat协议</h3><h4 id="Selective-Repeat协议-1"><a href="#Selective-Repeat协议-1" class="headerlink" title="Selective  Repeat协议"></a>Selective  Repeat协议</h4><ul>
<li>接收方对每个分组<font color='red'>单独进行确认</font><ul>
<li>设置<font color='red'>缓存机制</font>，缓存乱序到达的分组</li>
</ul>
</li>
<li>发送方只重传那些没收到ACK的分组<ul>
<li>为每个分组设置定时器</li>
</ul>
</li>
<li>发送方窗口<ul>
<li>N个连续的序列号</li>
<li>限制已发送未确认的分组</li>
</ul>
</li>
</ul>
<h4 id="Selective-Repeat协议：发送方-接收方窗口"><a href="#Selective-Repeat协议：发送方-接收方窗口" class="headerlink" title="Selective  Repeat协议：发送方/接收方窗口"></a>Selective  Repeat协议：发送方/接收方窗口</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423095540.png"></p>
<h4 id="SR协议"><a href="#SR协议" class="headerlink" title="SR协议"></a>SR协议</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423095958.png"></p>
<h4 id="SR协议示例"><a href="#SR协议示例" class="headerlink" title="SR协议示例"></a>SR协议示例</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423100020.png"></p>
<h2 id="面向连接传输协议—TCP协议"><a href="#面向连接传输协议—TCP协议" class="headerlink" title="面向连接传输协议—TCP协议"></a>面向连接传输协议—TCP协议</h2><h3 id="TCP概述"><a href="#TCP概述" class="headerlink" title="TCP概述"></a>TCP概述</h3><h4 id="TCP概述：-RFCs793-1122-1323-2018-2581"><a href="#TCP概述：-RFCs793-1122-1323-2018-2581" class="headerlink" title="TCP概述： RFCs793, 1122, 1323, 2018, 2581"></a>TCP概述： RFCs793, 1122, 1323, 2018, 2581</h4><ul>
<li><p>点对点</p>
<ul>
<li>一个发送方， 一个接收方</li>
</ul>
</li>
<li><p>可靠的、按序的字节流</p>
</li>
<li><p>流水线机制</p>
<ul>
<li>TCP拥塞控制和流量控制机制</li>
<li>设置窗口尺寸</li>
</ul>
</li>
<li><p>发送方，接收方缓存</p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423101618.png"></p>
</li>
<li><p>全双工（full-duplex）</p>
<ul>
<li>同一连接中能够传输双向数据流</li>
</ul>
</li>
<li><p>面向连接</p>
<ul>
<li>通信双方在发送数据之前必须建立连接</li>
<li>连接状态只在连接的两端中维护，在沿途节点中并不维护状态</li>
<li>TCP连接包括：两台主机上的缓存、连接状态变量、socket等</li>
</ul>
</li>
<li><p>流量控制机制</p>
</li>
</ul>
<h4 id="TCP段结构"><a href="#TCP段结构" class="headerlink" title="TCP段结构"></a>TCP段结构</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220423102709.png"></p>
<h4 id="TCP：序列号和ACK"><a href="#TCP：序列号和ACK" class="headerlink" title="TCP：序列号和ACK"></a>TCP：序列号和ACK</h4><p>序列号：</p>
<ul>
<li>序列号指的是<code>segment</code>中的第一个字节的编号， 而不是<code>segment</code>的编号</li>
<li>建立TCP连接时，双方随机选择序列号</li>
</ul>
<p>ACKs:</p>
<ul>
<li>希望接受到的下一个字节的序列号</li>
<li>累计确认：该字节之前的所有字节均已被正确接受到</li>
</ul>
<p>Q: 接收方如何处理乱序到达的Segment ?</p>
<ul>
<li>A:  TCP规范中没有规定， 由TCP的实现者做出决策</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220430195734.png"></p>
<h3 id="TCP可靠数据传输"><a href="#TCP可靠数据传输" class="headerlink" title="TCP可靠数据传输"></a>TCP可靠数据传输</h3><h4 id="TCP可靠数据传输概述"><a href="#TCP可靠数据传输概述" class="headerlink" title="TCP可靠数据传输概述"></a>TCP可靠数据传输概述</h4><ul>
<li>TCP在IP层提供的不可靠服务基础上实现可靠数据传输服务</li>
<li>流水线机制</li>
<li>累积确认</li>
<li>TCP使用单一重传定时器</li>
<li>触发重传的事件：<ul>
<li>超时</li>
<li>收到重复ACK</li>
</ul>
</li>
</ul>
<h4 id="TCP发送方事件"><a href="#TCP发送方事件" class="headerlink" title="TCP发送方事件"></a>TCP发送方事件</h4><ul>
<li>从应用层收到数据<ul>
<li>创建Segment</li>
<li>序列号是Segment第一个字节的编号</li>
<li>开启计时器</li>
<li>设置超时时间（TimeOutInterval）</li>
</ul>
</li>
<li>超时<ul>
<li>重传引起超时的Segment</li>
<li>重启计时器</li>
</ul>
</li>
<li>收到ACK<ul>
<li>如果确认此前未确认的Segment<ul>
<li>更新SendBase</li>
<li>如果窗口中还有未确认的分组，重新启动定时器</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="TCP重传示例"><a href="#TCP重传示例" class="headerlink" title="TCP重传示例"></a>TCP重传示例</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220430204935.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220430205308.png"></p>
<h4 id="快速重传机制"><a href="#快速重传机制" class="headerlink" title="快速重传机制"></a>快速重传机制</h4><ul>
<li>TCP实现中，如果发生超时，超时的时间间隔将重新设置，即将超时时间间隔加倍，导致其很大<ul>
<li>重发丢失的分组之前要等待很长时间</li>
</ul>
</li>
<li>通过重复的ACK检测分组丢失<ul>
<li>Sender会背靠背地发送多个分组</li>
<li>如果某个分组丢失，可能会引发多个重复的ACK</li>
</ul>
</li>
<li>如果sender收到对同一数据的3个ACK, 则假定该数据之后的段已经丢失<ul>
<li><font color='red'>快速重传</font>：在定时器超时之前即进行重传</li>
</ul>
</li>
</ul>
<h3 id="TCP流量控制"><a href="#TCP流量控制" class="headerlink" title="TCP流量控制"></a>TCP流量控制</h3><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220501201953.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220501202809.png"></p>
<h3 id="TCP连接管理"><a href="#TCP连接管理" class="headerlink" title="TCP连接管理"></a>TCP连接管理</h3><p>TCP sender和receiver在传输数据前需要建立<font color='red'>连接</font></p>
<ul>
<li><p>初始化TCP变量</p>
<ul>
<li>Seq. #</li>
<li>Buffer和流量控制信息</li>
</ul>
</li>
<li><p>Client: 连接发起者</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Socket clientSocket = <span class="keyword">new</span> <span class="built_in">Socket</span>(<span class="string">&quot;hostname&quot;</span>, <span class="string">&quot;post number&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>Server: 等待客户连接请求</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Socket connectionSocket = welcomeSocket.<span class="built_in">accept</span>();</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Three-way-handshake："><a href="#Three-way-handshake：" class="headerlink" title="Three way handshake："></a><font color='red'>Three way handshake：</font></h4><p><font color='9900CC'>Step1</font>: client host sends TCP SYN segment to server.</p>
<ul>
<li>specifies initial seq #</li>
<li>no data</li>
</ul>
<p><font color='9900CC'>Step2</font>: server host receives SYN, replies with SYNACK segment</p>
<ul>
<li>server allocates buffers</li>
<li>specifies server initial seq. #</li>
</ul>
<p><font color='9900CC'>Step3</font>: client receives SYNACK, replies with ACK segment, with may contain data.s </p>
<h4 id="TCP连接管理：-建立"><a href="#TCP连接管理：-建立" class="headerlink" title="TCP连接管理： 建立"></a>TCP连接管理： 建立</h4><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220501205938.png"></p>
<h4 id="TCP连接管理：-关闭"><a href="#TCP连接管理：-关闭" class="headerlink" title="TCP连接管理： 关闭"></a>TCP连接管理： 关闭</h4><p>Closing a connection</p>
<p>client closes socket : <code>clientSocket.close();</code></p>
<p><font color='9900CC'>Step1</font>: <code>client</code> 向 <code>server</code> 发送 <code>TCP FIN控制segment</code></p>
<p><font color='9900CC'>Step2</font>: <code>server</code> 收到<code>FIN</code>, 回复<code>ACK</code>, 关闭连接，发送<code>FIN</code></p>
<p><font color='9900CC'>Step3</font>: <code>client</code> 收到<code>FIN</code>, 回复<code>ACK</code></p>
<ul>
<li> 进入“等待” – 如果收到的<code>FIN</code>, 会重新发送<code>ACK</code></li>
</ul>
<p><font color='9900CC'>Step4</font>: <code>server</code>收到<code>ACK</code> ， 连接关闭 </p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502200710.png"></p>
<h4 id="TCP-lifecycle"><a href="#TCP-lifecycle" class="headerlink" title="TCP lifecycle"></a>TCP lifecycle</h4><h5 id="TCP-client-lifecycle"><a href="#TCP-client-lifecycle" class="headerlink" title="TCP client lifecycle"></a>TCP client lifecycle</h5><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502201913.png"></p>
<h5 id="TCP-server-lifecycle"><a href="#TCP-server-lifecycle" class="headerlink" title="TCP server lifecycle"></a>TCP server lifecycle</h5><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502202002.png"></p>
<h2 id="拥塞控制原理"><a href="#拥塞控制原理" class="headerlink" title="拥塞控制原理"></a>拥塞控制原理</h2><h3 id="拥塞的成因和代价：场景1"><a href="#拥塞的成因和代价：场景1" class="headerlink" title="拥塞的成因和代价：场景1"></a>拥塞的成因和代价：场景1</h3><ul>
<li>两个senders, 两个receivers</li>
<li>一个路由器， 无限缓存</li>
<li>没有重传</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502203943.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502203956.png"></p>
<ul>
<li>拥塞时分组延迟太大</li>
<li>达到最大throughput</li>
</ul>
<h3 id="拥塞的成因和代价：场景2"><a href="#拥塞的成因和代价：场景2" class="headerlink" title="拥塞的成因和代价：场景2"></a>拥塞的成因和代价：场景2</h3><ul>
<li>一个路由器， 有限的buffers</li>
<li>Sender重传分组</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502204621.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502205019.png"></p>
<h3 id="拥塞的成因和代价：场景3"><a href="#拥塞的成因和代价：场景3" class="headerlink" title="拥塞的成因和代价：场景3"></a>拥塞的成因和代价：场景3</h3><p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502205507.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220502205522.png"></p>
<h3 id="拥塞控制的方法"><a href="#拥塞控制的方法" class="headerlink" title="拥塞控制的方法"></a>拥塞控制的方法</h3><p>端到端的拥塞控制：</p>
<ul>
<li>网络层不需要显式的提供支持</li>
<li>端系统通过观察loss, delay等网络行为判断是否发生拥塞</li>
<li>TCP采取这种方法</li>
</ul>
<p>网络辅助的拥塞控制：</p>
<ul>
<li>路由器向发送方显式地反馈网络拥塞信息</li>
<li>简单的拥塞提示（1 bit）: SNA, DECbit, TCP/IP, ECN, ATM</li>
<li>提示发送方应该采取何种速率</li>
</ul>
<h3 id="ATM-ABR拥塞控制"><a href="#ATM-ABR拥塞控制" class="headerlink" title="ATM ABR拥塞控制"></a>ATM ABR拥塞控制</h3><ul>
<li><font color='red'>ABR: available bit rate</font><ul>
<li>弹性服务</li>
<li>如果发送方路径 “underloaded”,可以使用带宽</li>
<li>如果发送方数据拥塞，将发送速率降到最低保障速率</li>
</ul>
</li>
<li><font color='red'>RM(resource management cells)</font><ul>
<li>发送方发送</li>
<li>交换机设置RM cell位（网络辅助）<ul>
<li>NI bit: rate 不允许增长</li>
<li>CI bit: 拥塞提示</li>
</ul>
</li>
<li>RM cell 由接收方返回给发送方</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/sineagle/Pic_image/20220527195616.png"></p>
<h2 id="TCP性能分析"><a href="#TCP性能分析" class="headerlink" title="TCP性能分析"></a>TCP性能分析</h2><h2 id="传输层总结"><a href="#传输层总结" class="headerlink" title="传输层总结"></a>传输层总结</h2><p>传输层服务的基本原理</p>
<ul>
<li>复用/解分用</li>
<li>可靠数据传输</li>
<li>流量控制</li>
<li>拥塞控制</li>
</ul>
<p>Internet的传输层</p>
<ul>
<li>UDP</li>
<li>TCP</li>
</ul>

    </div>

    
    
    
        <div class="reward-container">
  <div>求大佬赏个饭</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/weichat.png" alt="sineagle 微信支付">
        <p>微信支付</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%AE%A1%E7%BD%91/" rel="tag"># 计网</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/03/12/JDBC-PrepareStatement-%E8%A7%A3%E5%86%B3SQL%E6%B3%A8%E5%85%A5%E9%97%AE%E9%A2%98/" rel="prev" title="JDBC-PreparedStatement 解决SQL注入问题">
      <i class="fa fa-chevron-left"></i> JDBC-PreparedStatement 解决SQL注入问题
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/05/04/Spring-Framework/" rel="next" title="Spring Framework">
      Spring Framework <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



			
          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.</span> <span class="nav-text">传输层服务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E5%BC%80%E7%AF%87"><span class="nav-number">1.1.</span> <span class="nav-text">传输层开篇</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E6%9C%8D%E5%8A%A1%E6%A6%82%E8%BF%B0"><span class="nav-number">1.2.</span> <span class="nav-text">传输层服务概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E6%9C%8D%E5%8A%A1%E5%92%8C%E5%8D%8F%E8%AE%AE"><span class="nav-number">1.2.1.</span> <span class="nav-text">传输层服务和协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82-vs-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="nav-number">1.2.2.</span> <span class="nav-text">传输层 vs. 网络层</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Internet%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="nav-number">1.2.3.</span> <span class="nav-text">Internet传输层协议</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E5%92%8C%E5%A4%9A%E8%B7%AF%E5%88%86%E7%94%A8"><span class="nav-number">2.</span> <span class="nav-text">多路复用和多路分用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8-%E5%88%86%E7%94%A8"><span class="nav-number">2.1.</span> <span class="nav-text">多路复用&#x2F;分用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%94%A8%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C"><span class="nav-number">2.2.</span> <span class="nav-text">分用如何工作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A0%E8%BF%9E%E6%8E%A5%E5%88%86%E7%94%A8"><span class="nav-number">2.3.</span> <span class="nav-text">无连接分用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%88%86%E7%94%A8"><span class="nav-number">2.4.</span> <span class="nav-text">面向连接的分用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8BWeb%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">2.4.1.</span> <span class="nav-text">多线程Web服务器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A0%E8%BF%9E%E6%8E%A5%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE-UDP"><span class="nav-number">3.</span> <span class="nav-text">无连接传输协议-UDP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP"><span class="nav-number">3.1.</span> <span class="nav-text">UDP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP%E6%A3%80%E9%AA%8C%E5%92%8C%EF%BC%88checksum%EF%BC%89"><span class="nav-number">3.2.</span> <span class="nav-text">UDP检验和（checksum）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8E%9F%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">可靠数据传输原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%EF%BC%9A%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.1.</span> <span class="nav-text">可靠数据传输协议基本结构：接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rdt1-0-%E5%8F%AF%E9%9D%A0%E4%BF%A1%E9%81%93%E4%B8%8A%E7%9A%84%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="nav-number">4.2.</span> <span class="nav-text">Rdt1.0: 可靠信道上的可靠传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rdt2-0"><span class="nav-number">4.3.</span> <span class="nav-text">Rdt2.0</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt2-0-%E4%BA%A7%E7%94%9F%E4%BD%8D%E9%94%99%E8%AF%AF%E7%9A%84%E4%BF%A1%E9%81%93"><span class="nav-number">4.3.1.</span> <span class="nav-text">Rdt2.0 产生位错误的信道</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt2-0-FSM%E8%A7%84%E7%BA%A6"><span class="nav-number">4.3.2.</span> <span class="nav-text">Rdt2.0 : FSM规约</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt2-0-%E6%97%A0%E9%94%99%E8%AF%AF%E5%9C%BA%E6%99%AF"><span class="nav-number">4.3.3.</span> <span class="nav-text">Rdt2.0: 无错误场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt2-0-%E6%9C%89%E9%94%99%E8%AF%AF%E5%9C%BA%E6%99%AF"><span class="nav-number">4.3.4.</span> <span class="nav-text">Rdt2.0 : 有错误场景</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rdt2-1-%E5%92%8C-Rdt2-2"><span class="nav-number">4.4.</span> <span class="nav-text">Rdt2.1 和 Rdt2.2</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt2-0%E6%9C%89%E4%BB%80%E4%B9%88%E7%BC%BA%E9%99%B7"><span class="nav-number">4.4.1.</span> <span class="nav-text">Rdt2.0有什么缺陷</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt2-2-%E6%97%A0NAK%E6%B6%88%E6%81%AF%E5%8D%8F%E8%AE%AE"><span class="nav-number">4.4.2.</span> <span class="nav-text">Rdt2.2: 无NAK消息协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rdt3-0"><span class="nav-number">4.5.</span> <span class="nav-text">Rdt3.0</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt3-0%E7%A4%BA%E4%BE%8B"><span class="nav-number">4.5.1.</span> <span class="nav-text">Rdt3.0示例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%9C%BA%E5%88%B6%E4%B8%8E%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.</span> <span class="nav-text">流水线机制与滑动窗口协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.1.</span> <span class="nav-text">滑动窗口协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%9C%BA%E5%88%B6%EF%BC%9A%E6%8F%90%E9%AB%98%E8%B5%84%E6%BA%90%E5%88%A9%E7%94%A8%E7%8E%87"><span class="nav-number">5.1.1.</span> <span class="nav-text">流水线机制：提高资源利用率</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.1.2.</span> <span class="nav-text">流水线协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%8D%8F%E8%AE%AE-1"><span class="nav-number">5.1.3.</span> <span class="nav-text">滑动窗口协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GBN%E5%8D%8F%E8%AE%AE%EF%BC%88Go-Back-N-%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="nav-number">5.2.</span> <span class="nav-text">GBN协议（Go-Back-N 协议）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Go-Back-N-GBN-%E5%8D%8F%E8%AE%AE%E5%8F%91%E9%80%81%E6%96%B9"><span class="nav-number">5.2.1.</span> <span class="nav-text">Go-Back-N(GBN)协议发送方</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GBN-%E5%8F%91%E9%80%81%E6%96%B9%E6%89%A9%E5%B1%95FSM"><span class="nav-number">5.2.2.</span> <span class="nav-text">GBN:发送方扩展FSM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GBN%EF%BC%9A%E6%8E%A5%E6%94%B6%E6%96%B9%E6%89%A9%E5%B1%95FSM"><span class="nav-number">5.2.3.</span> <span class="nav-text">GBN：接收方扩展FSM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GBN%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.2.4.</span> <span class="nav-text">GBN示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Selective-Repeat%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.3.</span> <span class="nav-text">Selective  Repeat协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Selective-Repeat%E5%8D%8F%E8%AE%AE-1"><span class="nav-number">5.3.1.</span> <span class="nav-text">Selective  Repeat协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Selective-Repeat%E5%8D%8F%E8%AE%AE%EF%BC%9A%E5%8F%91%E9%80%81%E6%96%B9-%E6%8E%A5%E6%94%B6%E6%96%B9%E7%AA%97%E5%8F%A3"><span class="nav-number">5.3.2.</span> <span class="nav-text">Selective  Repeat协议：发送方&#x2F;接收方窗口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SR%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.3.3.</span> <span class="nav-text">SR协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SR%E5%8D%8F%E8%AE%AE%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.3.4.</span> <span class="nav-text">SR协议示例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%E2%80%94TCP%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.</span> <span class="nav-text">面向连接传输协议—TCP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP%E6%A6%82%E8%BF%B0"><span class="nav-number">6.1.</span> <span class="nav-text">TCP概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%E6%A6%82%E8%BF%B0%EF%BC%9A-RFCs793-1122-1323-2018-2581"><span class="nav-number">6.1.1.</span> <span class="nav-text">TCP概述： RFCs793, 1122, 1323, 2018, 2581</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="nav-number">6.1.2.</span> <span class="nav-text">TCP段结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%EF%BC%9A%E5%BA%8F%E5%88%97%E5%8F%B7%E5%92%8CACK"><span class="nav-number">6.1.3.</span> <span class="nav-text">TCP：序列号和ACK</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="nav-number">6.2.</span> <span class="nav-text">TCP可靠数据传输</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E6%A6%82%E8%BF%B0"><span class="nav-number">6.2.1.</span> <span class="nav-text">TCP可靠数据传输概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%E5%8F%91%E9%80%81%E6%96%B9%E4%BA%8B%E4%BB%B6"><span class="nav-number">6.2.2.</span> <span class="nav-text">TCP发送方事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%E9%87%8D%E4%BC%A0%E7%A4%BA%E4%BE%8B"><span class="nav-number">6.2.3.</span> <span class="nav-text">TCP重传示例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E9%87%8D%E4%BC%A0%E6%9C%BA%E5%88%B6"><span class="nav-number">6.2.4.</span> <span class="nav-text">快速重传机制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="nav-number">6.3.</span> <span class="nav-text">TCP流量控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="nav-number">6.4.</span> <span class="nav-text">TCP连接管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Three-way-handshake%EF%BC%9A"><span class="nav-number">6.4.1.</span> <span class="nav-text">Three way handshake：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86%EF%BC%9A-%E5%BB%BA%E7%AB%8B"><span class="nav-number">6.4.2.</span> <span class="nav-text">TCP连接管理： 建立</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86%EF%BC%9A-%E5%85%B3%E9%97%AD"><span class="nav-number">6.4.3.</span> <span class="nav-text">TCP连接管理： 关闭</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP-lifecycle"><span class="nav-number">6.4.4.</span> <span class="nav-text">TCP lifecycle</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#TCP-client-lifecycle"><span class="nav-number">6.4.4.1.</span> <span class="nav-text">TCP client lifecycle</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#TCP-server-lifecycle"><span class="nav-number">6.4.4.2.</span> <span class="nav-text">TCP server lifecycle</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86"><span class="nav-number">7.</span> <span class="nav-text">拥塞控制原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%A5%E5%A1%9E%E7%9A%84%E6%88%90%E5%9B%A0%E5%92%8C%E4%BB%A3%E4%BB%B7%EF%BC%9A%E5%9C%BA%E6%99%AF1"><span class="nav-number">7.1.</span> <span class="nav-text">拥塞的成因和代价：场景1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%A5%E5%A1%9E%E7%9A%84%E6%88%90%E5%9B%A0%E5%92%8C%E4%BB%A3%E4%BB%B7%EF%BC%9A%E5%9C%BA%E6%99%AF2"><span class="nav-number">7.2.</span> <span class="nav-text">拥塞的成因和代价：场景2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%A5%E5%A1%9E%E7%9A%84%E6%88%90%E5%9B%A0%E5%92%8C%E4%BB%A3%E4%BB%B7%EF%BC%9A%E5%9C%BA%E6%99%AF3"><span class="nav-number">7.3.</span> <span class="nav-text">拥塞的成因和代价：场景3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">7.4.</span> <span class="nav-text">拥塞控制的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ATM-ABR%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="nav-number">7.5.</span> <span class="nav-text">ATM ABR拥塞控制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCP%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90"><span class="nav-number">8.</span> <span class="nav-text">TCP性能分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E6%80%BB%E7%BB%93"><span class="nav-number">9.</span> <span class="nav-text">传输层总结</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="sineagle"
      src="/images/touxiang.jpg">
  <p class="site-author-name" itemprop="name">sineagle</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">125</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">84</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/sineagle" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;sineagle" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:997991067@gmail.com" title="E-Mail → mailto:997991067@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/bottlecodes" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;bottlecodes" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://instagram.com/bottlecodes" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;bottlecodes" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
      <span class="links-of-author-item">
        <a href="skype:yourname?call|chat" title="Skype → skype:yourname?call|chat" rel="noopener" target="_blank"><i class="fab fa-skype fa-fw"></i>Skype</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://cnblogs.com/sineagle" title="OldBlogs → https:&#x2F;&#x2F;cnblogs.com&#x2F;sineagle" rel="noopener" target="_blank"><i class="fab fa-google fa-fw"></i>OldBlogs</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sineagle</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">404k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">6:07</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

  
<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>

</body>
</html>
